import{b as ae}from"./chunk-AXPFAJA2.js";import{$a as pt,Db as vt,Ea as nt,Eb as bt,F as et,Fb as yt,Fc as kt,Ha as at,Hb as xt,Ja as F,Ka as lt,La as ct,Ma as mt,Sa as ht,Va as ut,Ya as dt,Za as ft,a as ne,b as Ye,c as z,cc as wt,gb as _t,ha as tt,ia as rt,ic as St,jc as Pt,la as it,mb as gt,o as H,p as Qe,qb as le,rb as ce,xa as ot,ya as st}from"./chunk-XKYZBQRO.js";import{$ as A,$b as Oe,A as O,B as ke,Da as re,E as Ee,Fb as q,G as Be,H as Ne,Hb as j,Hc as Ae,J,M as v,Mc as Ze,Oa as G,Ob as Te,R as Ve,Sb as p,Tb as u,Ub as ie,V as qe,W as He,X as N,_c as se,a as T,b as Q,ba as Ie,bc as E,da as C,f as Zt,fd as Xe,g as Xt,ga as _,ib as f,ja as m,jb as V,ka as We,lb as Ge,ma as R,n as $e,nc as g,o as y,oa as k,oc as D,pa as c,pc as K,t as M,ta as ee,u as h,ua as Je,uc as oe,v as B,va as te,wb as Ke,y as P}from"./chunk-WSHGJWKC.js";var Ft=Zt(ve=>{"use strict";ve.byteLength=or;ve.toByteArray=nr;ve.fromByteArray=cr;var I=[],w=[],ir=typeof Uint8Array<"u"?Uint8Array:Array,De="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for($=0,Rt=De.length;$<Rt;++$)I[$]=De[$],w[De.charCodeAt($)]=$;var $,Rt;w[45]=62;w[95]=63;function jt(i){var t=i.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var a=i.indexOf("=");a===-1&&(a=t);var e=a===t?0:4-a%4;return[a,e]}function or(i){var t=jt(i),a=t[0],e=t[1];return(a+e)*3/4-e}function sr(i,t,a){return(t+a)*3/4-a}function nr(i){var t,a=jt(i),e=a[0],r=a[1],o=new ir(sr(i,e,r)),s=0,n=r>0?e-4:e,l;for(l=0;l<n;l+=4)t=w[i.charCodeAt(l)]<<18|w[i.charCodeAt(l+1)]<<12|w[i.charCodeAt(l+2)]<<6|w[i.charCodeAt(l+3)],o[s++]=t>>16&255,o[s++]=t>>8&255,o[s++]=t&255;return r===2&&(t=w[i.charCodeAt(l)]<<2|w[i.charCodeAt(l+1)]>>4,o[s++]=t&255),r===1&&(t=w[i.charCodeAt(l)]<<10|w[i.charCodeAt(l+1)]<<4|w[i.charCodeAt(l+2)]>>2,o[s++]=t>>8&255,o[s++]=t&255),o}function ar(i){return I[i>>18&63]+I[i>>12&63]+I[i>>6&63]+I[i&63]}function lr(i,t,a){for(var e,r=[],o=t;o<a;o+=3)e=(i[o]<<16&16711680)+(i[o+1]<<8&65280)+(i[o+2]&255),r.push(ar(e));return r.join("")}function cr(i){for(var t,a=i.length,e=a%3,r=[],o=16383,s=0,n=a-e;s<n;s+=o)r.push(lr(i,s,s+o>n?n:s+o));return e===1?(t=i[a-1],r.push(I[t>>2]+I[t<<4&63]+"==")):e===2&&(t=(i[a-2]<<8)+i[a-1],r.push(I[t>>10]+I[t>>4&63]+I[t<<2&63]+"=")),r.join("")}});var he={REMOVE:"remove",SHOW:"show"},It=(()=>{let t=class t{constructor(){this.strategiesSource=new y({}),this.strategies$=this.strategiesSource.asObservable()}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac});let i=t;return i})(),Re=new R("USE_CONFIGURATION_STORE"),je=(()=>{let t=class t{constructor(e=!1,r){this.isolate=e,this.configurationStore=r,this.strategiesSource=this.isolate?new y({}):this.configurationStore.strategiesSource,this.strategies$=this.strategiesSource.asObservable(),this.onAuthorisedDefaultStrategy=this.isolate?void 0:this.configurationStore.onAuthorisedDefaultStrategy,this.onUnAuthorisedDefaultStrategy=this.isolate?void 0:this.configurationStore.onUnAuthorisedDefaultStrategy}setDefaultOnAuthorizedStrategy(e){this.isolate?this.onAuthorisedDefaultStrategy=this.getDefinedStrategy(e):(this.configurationStore.onAuthorisedDefaultStrategy=this.getDefinedStrategy(e),this.onAuthorisedDefaultStrategy=this.configurationStore.onAuthorisedDefaultStrategy)}setDefaultOnUnauthorizedStrategy(e){this.isolate?this.onUnAuthorisedDefaultStrategy=this.getDefinedStrategy(e):(this.configurationStore.onUnAuthorisedDefaultStrategy=this.getDefinedStrategy(e),this.onUnAuthorisedDefaultStrategy=this.configurationStore.onUnAuthorisedDefaultStrategy)}addPermissionStrategy(e,r){this.strategiesSource.value[e]=r}getStrategy(e){return this.strategiesSource.value[e]}getAllStrategies(){return this.strategiesSource.value}getDefinedStrategy(e){if(this.strategiesSource.value[e]||this.isPredefinedStrategy(e))return e;throw new Error(`No ' ${e} ' strategy is found please define one`)}isPredefinedStrategy(e){return e===he.SHOW||e===he.REMOVE}};t.\u0275fac=function(r){return new(r||t)(k(Re),k(It))},t.\u0275prov=m({token:t,factory:t.\u0275fac});let i=t;return i})();function x(i){return typeof i=="function"}function Ce(i){if(Object.prototype.toString.call(i)!=="[object Object]")return!1;{let t=Object.getPrototypeOf(i);return t===null||t===Object.prototype}}function Tt(i){return!!i&&typeof i=="string"}function ue(i){return typeof i=="boolean"}function Yt(i){return Object.prototype.toString.call(i)==="[object Promise]"}function me(i){return Array.isArray(i)?i.length>0:!!i}function de(i){return Tt(i)?[i]:i}var Ot=(()=>{let t=class t{constructor(){this.permissionsSource=new y({}),this.permissions$=this.permissionsSource.asObservable()}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac});let i=t;return i})(),Fe=new R("USE_PERMISSIONS_STORE"),L=(()=>{let t=class t{constructor(e=!1,r){this.isolate=e,this.permissionsStore=r,this.permissionsSource=this.isolate?new y({}):this.permissionsStore.permissionsSource,this.permissions$=this.permissionsSource.asObservable()}flushPermissions(){this.permissionsSource.next({})}hasPermission(e){return!e||Array.isArray(e)&&e.length===0?Promise.resolve(!0):(e=de(e),this.hasArrayPermission(e))}loadPermissions(e,r){let o=e.reduce((s,n)=>this.reducePermission(s,n,r),{});this.permissionsSource.next(o)}addPermission(e,r){if(Array.isArray(e)){let o=e.reduce((s,n)=>this.reducePermission(s,n,r),this.permissionsSource.value);this.permissionsSource.next(o)}else{let o=this.reducePermission(this.permissionsSource.value,e,r);this.permissionsSource.next(o)}}removePermission(e){let r=T({},this.permissionsSource.value);delete r[e],this.permissionsSource.next(r)}getPermission(e){return this.permissionsSource.value[e]}getPermissions(){return this.permissionsSource.value}reducePermission(e,r,o){return o&&x(o)?Q(T({},e),{[r]:{name:r,validationFunction:o}}):Q(T({},e),{[r]:{name:r}})}hasArrayPermission(e){let r=e.map(o=>{if(this.hasPermissionValidationFunction(o)){let s=this.permissionsSource.value[o].validationFunction,n=T({},this.permissionsSource.value);return h(null).pipe(P(()=>s(o,n)),C(l=>ue(l)?h(l):l),v(()=>h(!1)))}return h(!!this.permissionsSource.value[o])});return M(r).pipe(ke(),N(o=>o!==!1,!1),P(o=>o!==!1)).toPromise().then(o=>o)}hasPermissionValidationFunction(e){return!!this.permissionsSource.value[e]&&!!this.permissionsSource.value[e].validationFunction&&x(this.permissionsSource.value[e].validationFunction)}};t.\u0275fac=function(r){return new(r||t)(k(Fe),k(Ot))},t.\u0275prov=m({token:t,factory:t.\u0275fac});let i=t;return i})(),fe=class{constructor(){this.rolesSource=new y({}),this.roles$=this.rolesSource.asObservable()}},Ue=new R("USE_ROLES_STORE"),W=(()=>{let t=class t{constructor(e=!1,r,o){this.isolate=e,this.rolesStore=r,this.permissionsService=o,this.rolesSource=this.isolate?new y({}):this.rolesStore.rolesSource,this.roles$=this.rolesSource.asObservable()}addRole(e,r){let o=Q(T({},this.rolesSource.value),{[e]:{name:e,validationFunction:r}});this.rolesSource.next(o)}addRoleWithPermissions(e,r){this.permissionsService.addPermission(r),this.addRole(e,r)}addRoles(e){Object.keys(e).forEach((r,o)=>{this.addRole(r,e[r])})}addRolesWithPermissions(e){Object.keys(e).forEach((r,o)=>{this.addRoleWithPermissions(r,e[r])})}flushRoles(){this.rolesSource.next({})}flushRolesAndPermissions(){this.flushRoles(),this.permissionsService.flushPermissions()}removeRole(e){let r=T({},this.rolesSource.value);delete r[e],this.rolesSource.next(r)}getRoles(){return this.rolesSource.value}getRole(e){return this.rolesSource.value[e]}hasOnlyRoles(e){return!e||Array.isArray(e)&&e.length===0?Promise.resolve(!0):(e=de(e),Promise.all([this.hasRoleKey(e),this.hasRolePermission(this.rolesSource.value,e)]).then(([o,s])=>o||s))}hasRoleKey(e){let r=e.map(o=>{if(!!this.rolesSource.value[o]&&!!this.rolesSource.value[o].validationFunction&&x(this.rolesSource.value[o].validationFunction)&&!Yt(this.rolesSource.value[o].validationFunction)){let n=this.rolesSource.value[o].validationFunction,l=T({},this.rolesSource.value);return h(null).pipe(P(()=>n(o,l)),C(b=>ue(b)?h(b):b),v(()=>h(!1)))}return h(!1)});return M(r).pipe(ke(),N(o=>o!==!1,!1),P(o=>o!==!1)).toPromise().then(o=>o)}hasRolePermission(e,r){return M(r).pipe(O(o=>e[o]&&Array.isArray(e[o].validationFunction)?M(e[o].validationFunction).pipe(O(s=>this.permissionsService.hasPermission(s)),qe(s=>s===!0)):h(!1)),N(o=>o===!0,!1)).toPromise()}};t.\u0275fac=function(r){return new(r||t)(k(Ue),k(fe),k(L))},t.\u0275prov=m({token:t,factory:t.\u0275fac});let i=t;return i})(),Cr=(()=>{let t=class t{constructor(){this.permissionsAuthorized=new G,this.permissionsUnauthorized=new G,this.firstMergeUnusedRun=1,this.permissionsService=c(L),this.configurationService=c(je),this.rolesService=c(W),this.viewContainer=c(Ke),this.changeDetector=c(Ze),this.templateRef=c(Ge)}ngOnInit(){this.viewContainer.clear(),this.initPermissionSubscription=this.validateExceptOnlyPermissions()}ngOnChanges(e){let r=e.ngxPermissionsOnly,o=e.ngxPermissionsExcept;if(r||o){if(r&&r.firstChange||o&&o.firstChange)return;J(this.permissionsService.permissions$,this.rolesService.roles$).pipe(Ie(this.firstMergeUnusedRun),Ve(1)).subscribe(()=>{if(me(this.ngxPermissionsExcept)){this.validateExceptAndOnlyPermissions();return}if(me(this.ngxPermissionsOnly)){this.validateOnlyPermissions();return}this.handleAuthorisedPermission(this.getAuthorisedTemplates())})}}ngOnDestroy(){this.initPermissionSubscription&&this.initPermissionSubscription.unsubscribe()}validateExceptOnlyPermissions(){return J(this.permissionsService.permissions$,this.rolesService.roles$).pipe(Ie(this.firstMergeUnusedRun)).subscribe(()=>{if(me(this.ngxPermissionsExcept)){this.validateExceptAndOnlyPermissions();return}if(me(this.ngxPermissionsOnly)){this.validateOnlyPermissions();return}this.handleAuthorisedPermission(this.getAuthorisedTemplates())})}validateExceptAndOnlyPermissions(){Promise.all([this.permissionsService.hasPermission(this.ngxPermissionsExcept),this.rolesService.hasOnlyRoles(this.ngxPermissionsExcept)]).then(([e,r])=>{if(e||r){this.handleUnauthorisedPermission(this.ngxPermissionsExceptElse||this.ngxPermissionsElse);return}if(this.ngxPermissionsOnly)throw!1;this.handleAuthorisedPermission(this.ngxPermissionsExceptThen||this.ngxPermissionsThen||this.templateRef)}).catch(()=>{this.ngxPermissionsOnly?this.validateOnlyPermissions():this.handleAuthorisedPermission(this.ngxPermissionsExceptThen||this.ngxPermissionsThen||this.templateRef)})}validateOnlyPermissions(){Promise.all([this.permissionsService.hasPermission(this.ngxPermissionsOnly),this.rolesService.hasOnlyRoles(this.ngxPermissionsOnly)]).then(([e,r])=>{e||r?this.handleAuthorisedPermission(this.ngxPermissionsOnlyThen||this.ngxPermissionsThen||this.templateRef):this.handleUnauthorisedPermission(this.ngxPermissionsOnlyElse||this.ngxPermissionsElse)}).catch(()=>{this.handleUnauthorisedPermission(this.ngxPermissionsOnlyElse||this.ngxPermissionsElse)})}handleUnauthorisedPermission(e){if(!(ue(this.currentAuthorizedState)&&!this.currentAuthorizedState)){if(this.currentAuthorizedState=!1,this.permissionsUnauthorized.emit(),this.getUnAuthorizedStrategyInput()){this.applyStrategyAccordingToStrategyType(this.getUnAuthorizedStrategyInput());return}this.configurationService.onUnAuthorisedDefaultStrategy&&!this.elseBlockDefined()?this.applyStrategy(this.configurationService.onUnAuthorisedDefaultStrategy):this.showTemplateBlockInView(e)}}handleAuthorisedPermission(e){if(!(ue(this.currentAuthorizedState)&&this.currentAuthorizedState)){if(this.currentAuthorizedState=!0,this.permissionsAuthorized.emit(),this.getAuthorizedStrategyInput()){this.applyStrategyAccordingToStrategyType(this.getAuthorizedStrategyInput());return}this.configurationService.onAuthorisedDefaultStrategy&&!this.thenBlockDefined()?this.applyStrategy(this.configurationService.onAuthorisedDefaultStrategy):this.showTemplateBlockInView(e)}}applyStrategyAccordingToStrategyType(e){if(Tt(e)){this.applyStrategy(e);return}if(x(e)){this.showTemplateBlockInView(this.templateRef),e(this.templateRef);return}}showTemplateBlockInView(e){this.viewContainer.clear(),e&&(this.viewContainer.createEmbeddedView(e),this.changeDetector.markForCheck())}getAuthorisedTemplates(){return this.ngxPermissionsOnlyThen||this.ngxPermissionsExceptThen||this.ngxPermissionsThen||this.templateRef}elseBlockDefined(){return!!this.ngxPermissionsExceptElse||!!this.ngxPermissionsElse}thenBlockDefined(){return!!this.ngxPermissionsExceptThen||!!this.ngxPermissionsThen}getAuthorizedStrategyInput(){return this.ngxPermissionsOnlyAuthorisedStrategy||this.ngxPermissionsExceptAuthorisedStrategy||this.ngxPermissionsAuthorisedStrategy}getUnAuthorizedStrategyInput(){return this.ngxPermissionsOnlyUnauthorisedStrategy||this.ngxPermissionsExceptUnauthorisedStrategy||this.ngxPermissionsUnauthorisedStrategy}applyStrategy(e){if(e===he.SHOW){this.showTemplateBlockInView(this.templateRef);return}if(e===he.REMOVE){this.viewContainer.clear();return}let r=this.configurationService.getStrategy(e);this.showTemplateBlockInView(this.templateRef),r(this.templateRef)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=te({type:t,selectors:[["","ngxPermissionsOnly",""],["","ngxPermissionsExcept",""]],inputs:{ngxPermissionsOnly:"ngxPermissionsOnly",ngxPermissionsOnlyThen:"ngxPermissionsOnlyThen",ngxPermissionsOnlyElse:"ngxPermissionsOnlyElse",ngxPermissionsExcept:"ngxPermissionsExcept",ngxPermissionsExceptElse:"ngxPermissionsExceptElse",ngxPermissionsExceptThen:"ngxPermissionsExceptThen",ngxPermissionsThen:"ngxPermissionsThen",ngxPermissionsElse:"ngxPermissionsElse",ngxPermissionsOnlyAuthorisedStrategy:"ngxPermissionsOnlyAuthorisedStrategy",ngxPermissionsOnlyUnauthorisedStrategy:"ngxPermissionsOnlyUnauthorisedStrategy",ngxPermissionsExceptUnauthorisedStrategy:"ngxPermissionsExceptUnauthorisedStrategy",ngxPermissionsExceptAuthorisedStrategy:"ngxPermissionsExceptAuthorisedStrategy",ngxPermissionsUnauthorisedStrategy:"ngxPermissionsUnauthorisedStrategy",ngxPermissionsAuthorisedStrategy:"ngxPermissionsAuthorisedStrategy"},outputs:{permissionsAuthorized:"permissionsAuthorized",permissionsUnauthorized:"permissionsUnauthorized"},features:[re]});let i=t;return i})(),Qt="default";var Et=(()=>{let t=class t{constructor(e,r,o){this.permissionsService=e,this.rolesService=r,this.router=o}canActivate(e,r){return this.hasPermissions(e,r)}canActivateChild(e,r){return this.hasPermissions(e,r)}canLoad(e){return this.hasPermissions(e)}canMatch(e){return this.hasPermissions(e)}hasPermissions(e,r){let o=e&&e.data?e.data.permissions:{},s=this.transformPermission(o,e,r);return this.isParameterAvailable(s.except)?this.passingExceptPermissionsValidation(s,e,r):this.isParameterAvailable(s.only)?this.passingOnlyPermissionsValidation(s,e,r):!0}transformPermission(e,r,o){let s=x(e.only)?e.only(r,o):de(e.only),n=x(e.except)?e.except(r,o):de(e.except),l=e.redirectTo;return{only:s,except:n,redirectTo:l}}isParameterAvailable(e){return!!e&&e.length>0}passingExceptPermissionsValidation(e,r,o){if(e.redirectTo&&(x(e.redirectTo)||Ce(e.redirectTo)&&!this.isRedirectionWithParameters(e.redirectTo))){let s="";return M(e.except).pipe(O(n=>Ee([this.permissionsService.hasPermission(n),this.rolesService.hasOnlyRoles(n)]).pipe(_(l=>{l.every(S=>S===!1)||(s=n)}))),N(n=>n.some(l=>l===!0),!1),O(n=>s?(this.handleRedirectOfFailedPermission(e,s,r,o),h(!1)):!n&&e.only?this.onlyRedirectCheck(e,r,o):h(!n))).toPromise()}return Promise.all([this.permissionsService.hasPermission(e.except),this.rolesService.hasOnlyRoles(e.except)]).then(([s,n])=>s||n?(e.redirectTo&&this.redirectToAnotherRoute(e.redirectTo,r,o),!1):e.only?this.checkOnlyPermissions(e,r,o):!0)}redirectToAnotherRoute(e,r,o,s){let n=x(e)?e(s,r,o):e;if(this.isRedirectionWithParameters(n)){n.navigationCommands=this.transformNavigationCommands(n.navigationCommands,r,o),n.navigationExtras=this.transformNavigationExtras(n.navigationExtras,r,o),this.router.navigate(n.navigationCommands,n.navigationExtras);return}Array.isArray(n)?this.router.navigate(n):this.router.navigate([n])}isRedirectionWithParameters(e){return Ce(e)&&(!!e.navigationCommands||!!e.navigationExtras)}transformNavigationCommands(e,r,o){return x(e)?e(r,o):e}transformNavigationExtras(e,r,o){return x(e)?e(r,o):e}onlyRedirectCheck(e,r,o){let s="";return M(e.only).pipe(O(n=>Ee([this.permissionsService.hasPermission(n),this.rolesService.hasOnlyRoles(n)]).pipe(_(l=>{l.every(S=>S===!1)&&(s=n)}))),N(n=>x(e.redirectTo)?n.some(l=>l===!0):n.every(l=>l===!1),!1),O(n=>x(e.redirectTo)?n?h(!0):(this.handleRedirectOfFailedPermission(e,s,r,o),h(!1)):(s&&this.handleRedirectOfFailedPermission(e,s,r,o),h(!n)))).toPromise()}handleRedirectOfFailedPermission(e,r,o,s){this.isFailedPermissionPropertyOfRedirectTo(e,r)?this.redirectToAnotherRoute(e.redirectTo[r],o,s,r):x(e.redirectTo)?this.redirectToAnotherRoute(e.redirectTo,o,s,r):this.redirectToAnotherRoute(e.redirectTo[Qt],o,s,r)}isFailedPermissionPropertyOfRedirectTo(e,r){return!!e.redirectTo&&e.redirectTo[r]}checkOnlyPermissions(e,r,o){let s=T({},e);return Promise.all([this.permissionsService.hasPermission(s.only),this.rolesService.hasOnlyRoles(s.only)]).then(([n,l])=>n||l?!0:(s.redirectTo&&this.redirectToAnotherRoute(s.redirectTo,r,o),!1))}passingOnlyPermissionsValidation(e,r,o){return x(e.redirectTo)||Ce(e.redirectTo)&&!this.isRedirectionWithParameters(e.redirectTo)?this.onlyRedirectCheck(e,r,o):this.checkOnlyPermissions(e,r,o)}};t.\u0275fac=function(r){return new(r||t)(k(L),k(W),k(H))},t.\u0275prov=m({token:t,factory:t.\u0275fac});let i=t;return i})();var Rr=(()=>{let t=class t{static forRoot(e={}){return{ngModule:t,providers:[Ot,fe,It,L,Et,W,je,{provide:Fe,useValue:e.permissionsIsolate},{provide:Ue,useValue:e.rolesIsolate},{provide:Re,useValue:e.configurationIsolate}]}}static forChild(e={}){return{ngModule:t,providers:[{provide:Fe,useValue:e.permissionsIsolate},{provide:Ue,useValue:e.rolesIsolate},{provide:Re,useValue:e.configurationIsolate},je,L,W,Et]}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=We({});let i=t;return i})();var Lr=(()=>{let t=class t{constructor(){this.translate=c(ae),this.paginatorIntl=new _t,this.translate.onLangChange.subscribe(e=>this.getPaginatorIntl())}getPaginatorIntl(){return this.paginatorIntl.itemsPerPageLabel=this.translate.instant("paginator.items_per_page_label"),this.paginatorIntl.previousPageLabel=this.translate.instant("paginator.previous_page_label"),this.paginatorIntl.nextPageLabel=this.translate.instant("paginator.next_page_label"),this.paginatorIntl.firstPageLabel=this.translate.instant("paginator.first_page_label"),this.paginatorIntl.lastPageLabel=this.translate.instant("paginator.last_page_label"),this.paginatorIntl.getRangeLabel=this.getRangeLabel.bind(this),this.paginatorIntl.changes.next(),this.paginatorIntl}getRangeLabel(e,r,o){if(o===0||r===0)return this.translate.instant("paginator.range_page_label_1",{length:o});o=Math.max(o,0);let s=e*r,n=s<o?Math.min(s+r,o):s+r;return this.translate.instant("paginator.range_page_label_2",{startIndex:s+1,endIndex:n,length:o})}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var pe=(()=>{let t=class t{constructor(){this.menu$=new y([])}getAll(){return this.menu$.asObservable()}change(){return this.menu$.pipe(A())}set(e){return this.menu$.next(e),this.menu$.asObservable()}add(e){let r=this.menu$.value;r.push(e),this.menu$.next(r)}reset(){this.menu$.next([])}buildRoute(e){let r="";return e.forEach(o=>{o&&o.trim()&&(r+="/"+o.replace(/^\/+|\/+$/g,""))}),r}getItemName(e){return this.getLevel(e)[e.length-1]}isLeafItem(e){let r=e.route===void 0,o=e.children===void 0,s=!o&&e.children?.length===0;return r||o||s}deepClone(e){return JSON.parse(JSON.stringify(e))}isJsonObjEqual(e,r){return JSON.stringify(e)===JSON.stringify(r)}isRouteEqual(e,r){return r=this.deepClone(r),r=r.filter(o=>o!==""),this.isJsonObjEqual(e,r)}getLevel(e){let r=[];return this.menu$.value.forEach(o=>{let s=[{item:o,parentNamePathList:[],realRouteArr:[]}];for(;s.length>0;){let n=[];for(let l of s){let b=l.item,S=this.deepClone(l.parentNamePathList).concat(b.name),U=this.deepClone(l.realRouteArr).concat(b.route);if(this.isRouteEqual(e,U)){r=S;break}if(!this.isLeafItem(b)){let Gt=b.children?.map(Kt=>({item:Kt,parentNamePathList:S,realRouteArr:U}));n=n.concat(Gt)}}s=n}}),r}addNamespace(e,r){e.forEach(o=>{o.name=`${r}.${o.name}`,o.children&&o.children.length>0&&this.addNamespace(o.children,o.name)})}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function tr(i,t){if(i&1&&(p(0,"div",2),g(1),u()),i&2){let a=E();f(),D(a.title)}}function rr(i,t){if(i&1&&(p(0,"div",3),g(1),u()),i&2){let a=E();f(),D(a.message)}}var Jr=(()=>{let t=class t{constructor(){this.code="",this.title="",this.message=""}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=ee({type:t,selectors:[["error-code"]],inputs:{code:"code",title:"title",message:"message"},standalone:!0,features:[oe],decls:8,vars:3,consts:[[1,"matero-error-wrap"],[1,"matero-error-code"],[1,"matero-error-title"],[1,"matero-error-message"],["mat-raised-button","","color","primary","routerLink","/"]],template:function(r,o){r&1&&(p(0,"div",0)(1,"div",1),g(2),u(),q(3,tr,2,1,"div",2)(4,rr,2,1,"div",3),p(5,"div")(6,"a",4),g(7,"Back to Home"),u()()()),r&2&&(f(2),D(o.code),f(),Te(o.title?3:-1),f(),Te(o.message?4:-1))},dependencies:[Qe,it,rt],styles:[`.matero-error-wrap{text-align:center}.matero-error-code{padding:1.25rem 0;font-size:10rem;text-shadow:.1325825215rem .1325825215rem 0 rgba(0,0,0,.028575),.2651650429rem .2651650429rem 0 rgba(0,0,0,.02715),.3977475644rem .3977475644rem 0 rgba(0,0,0,.025725),.5303300859rem .5303300859rem 0 rgba(0,0,0,.0243),.6629126074rem .6629126074rem 0 rgba(0,0,0,.022875),.7954951288rem .7954951288rem 0 rgba(0,0,0,.02145),.9280776503rem .9280776503rem 0 rgba(0,0,0,.020025),1.0606601718rem 1.0606601718rem 0 rgba(0,0,0,.0186),1.1932426933rem 1.1932426933rem 0 rgba(0,0,0,.017175),1.3258252147rem 1.3258252147rem 0 rgba(0,0,0,.01575),1.4584077362rem 1.4584077362rem 0 rgba(0,0,0,.014325),1.5909902577rem 1.5909902577rem 0 rgba(0,0,0,.0129),1.7235727791rem 1.7235727791rem 0 rgba(0,0,0,.011475),1.8561553006rem 1.8561553006rem 0 rgba(0,0,0,.01005),1.9887378221rem 1.9887378221rem 0 rgba(0,0,0,.008625),2.1213203436rem 2.1213203436rem 0 rgba(0,0,0,.0072),2.253902865rem 2.253902865rem 0 rgba(0,0,0,.005775),2.3864853865rem 2.3864853865rem 0 rgba(0,0,0,.00435),2.519067908rem 2.519067908rem 0 rgba(0,0,0,.002925),2.6516504294rem 2.6516504294rem 0 rgba(0,0,0,.0015)}.matero-error-title{margin:0 0 1rem;font-size:1.25rem;font-weight:500;line-height:2rem}.matero-error-message{margin:0 0 1rem;font-size:1rem;font-weight:400;line-height:1.75rem}
`],encapsulation:2});let i=t;return i})();var Me={navPos:"side",dir:"rtl",theme:"light",showHeader:!0,headerPos:"fixed",showUserPanel:!0,sidenavOpened:!0,sidenavCollapsed:!1,language:"en-US"};var ge=(()=>{let t=class t{get notify(){return this.notify$.asObservable()}constructor(){this.key="ng-matero-settings",this.store=c(_e),this.mediaMatcher=c(et),this.document=c(se),this.dir=c(At),this.notify$=new y({}),this.themeColor="light";let e=this.store.get(this.key);this.options=Object.assign(Me,e),this.themeColor=this.getThemeColor(),this.htmlElement=this.document.querySelector("html")}reset(){this.store.remove(this.key)}getThemeColor(){return this.options.theme==="auto"&&this.mediaMatcher.matchMedia("(prefers-color-scheme)").media!=="not all"?this.mediaMatcher.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":this.options.theme}setOptions(e){this.options=Object.assign(Me,e),this.store.set(this.key,this.options),this.notify$.next(this.options)}setLanguage(e){this.options.language=e,this.store.set(this.key,this.options),this.notify$.next(this.options)}setDirection(){this.dir.value=this.options.dir,this.htmlElement.dir=this.dir.value}setTheme(){this.themeColor=this.getThemeColor(),this.themeColor==="dark"?this.htmlElement.classList.add("theme-dark"):this.htmlElement.classList.remove("theme-dark")}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var Ct=(()=>{let t=class t{constructor(){this.translate=c(ae),this.settings=c(ge)}load(){return new Promise(e=>{let r=navigator.language,o=r.match(/en-US|zh-CN|zh-TW/)?r:"en-US";this.settings.setLanguage(o),this.translate.setDefaultLang(o),this.translate.use(o).subscribe({next:()=>console.log(`Successfully initialized '${o}' language.'`),error:()=>console.error(`Problem with '${o}' language initialization.'`),complete:()=>e()})})}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var ye=Xt(Ft()),be=class{static encode(t){return(0,ye.fromByteArray)(mr(t)).replace(/[+/=]/g,a=>({"+":"-","/":"_","=":""})[a])}static decode(t){for(t=t.replace(/[-_]/g,a=>({"-":"+",_:"/"})[a]);t.length%4;)t+="=";return hr((0,ye.toByteArray)(t))}};function mr(i){let t=[];for(let a=0;a<i.length;a++)t.push(i.charCodeAt(a));return t}function hr(i){return String.fromCharCode(...i)}var ze={encode:be.encode,decode:be.decode};function Ut(i){return i.substring(0,1).toUpperCase()+i.substring(1,i.length).toLowerCase()}function Z(){return Math.ceil(new Date().getTime()/1e3)}function Mt(i){return Math.max(0,i-Z())}function xe(i){return Object.fromEntries(Object.entries(i).filter(([,t])=>t!=null))}function Dt(i){return Object.keys(i).length===0}var we=(()=>{let t=class t{constructor(){this.http=c(Ye),this.snackBar=c(le),this.apiUrl=`${ce.apiUrl}/users`}login(e,r,o=!1){return this.http.post(`${this.apiUrl}/login`,{email:e,password:r}).pipe(v(this.handleError.bind(this)))}register(e){return this.http.post(`${this.apiUrl}/register`,e).pipe(v(this.handleError.bind(this)))}refresh(e){return this.http.post(`${this.apiUrl}/refresh`,e).pipe(v(this.handleError.bind(this)))}forgotPassword(e){return this.http.post(`${this.apiUrl}/forgot-password`,{email:e}).pipe(v(this.handleError.bind(this)))}resetPassword(e,r,o){let s={email:e,resetCode:r,newPassword:o};return this.http.post(`${this.apiUrl}/resetPassword`,s).pipe(P(n=>n),_(()=>{console.log("Password reset successfully for email:",e)}),v(this.handleError.bind(this)))}me(){return this.http.get(`${this.apiUrl}/me`).pipe(_(e=>{e.avatar="./images/admin.png",e.email==="administrator@localhost"&&(e.permissions=["canChangePassword"]),console.log(e)}),v(this.handleError.bind(this)))}menu(){return this.http.get("data/menu.json?_t="+Date.now()).pipe(P(e=>e.menu),v(this.handleError.bind(this)))}handleError(e){let r;if(e.error instanceof ErrorEvent)r=`Client-side error: ${e.error.message}`;else switch(e.status){case 400:r=this.handleValidationError(e);break;case 401:r="Unauthorized access. Please log in.";break;case 404:r="Resource not found.";break;case 500:r="Server error. Please try again later.";break;default:r=`Unexpected error occurred: ${e.message}`;break}return this.snackBar.open(r,"Close",{duration:5e3}),B(()=>new Error(r))}handleValidationError(e){let r=e.error.errors||{},o="\u062E\u0637\u0623 \u0641\u064A \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u062F\u062E\u0644\u0629.";if(r.DuplicateUserName)o="\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645  \u0645\u062D\u062C\u0648\u0632 \u0628\u0627\u0644\u0641\u0639\u0644.";else if(r.PasswordTooShort)o="\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u064A\u062C\u0628 \u0623\u0646 \u062A\u0643\u0648\u0646 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644 8 \u0623\u062D\u0631\u0641.";else if(r.PasswordRequiresDigit)o="\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u064A\u062C\u0628 \u0623\u0646 \u062A\u062D\u062A\u0648\u064A \u0639\u0644\u0649 \u0631\u0642\u0645 \u0648\u0627\u062D\u062F \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644.";else if(r.InvalidEmail)o="\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A  \u063A\u064A\u0631 \u0635\u0627\u0644\u062D.";else for(let[s,n]of Object.entries(r)){let l=n;if(l.length>0){o=l[0];break}}return o}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var Le=class{constructor(t){this.attributes=t}get accessToken(){return this.attributes.accessToken}get refreshToken(){return this.attributes.refreshToken}get tokenType(){return this.attributes.tokenType??"bearer"}get exp(){return this.attributes.exp}valid(){return this.hasAccessToken()&&!this.isExpired()}getBearerToken(){return this.accessToken?[Ut(this.tokenType),this.accessToken].join(" ").trim():""}needRefresh(){return this.exp!==void 0&&this.exp>=0}getRefreshTime(){return Mt((this.exp??0)-5)}hasAccessToken(){return!!this.accessToken}isExpired(){return this.exp!==void 0&&this.exp-Z()<=0}},X=class extends Le{},Y=class extends X{static is(t){try{let[a]=t.split(".");return JSON.parse(ze.decode(a)).typ.toUpperCase().includes("JWT")}catch{return!1}}get exp(){return this.payload?.exp}get payload(){if(!this.accessToken)return{};if(this._payload)return this._payload;let[,t]=this.accessToken.split("."),a=JSON.parse(ze.decode(t));return a.exp||(a.exp=this.attributes.exp),this._payload=a}};var zt=(()=>{let t=class t{create(e){if(e.accessToken)return Y.is(e.accessToken)?new Y(e):new X(e)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var Se=(()=>{let t=class t{constructor(){this.key="ng-matero-token",this.store=c(_e),this.factory=c(zt),this.change$=new y(void 0),this.refresh$=new $e}get token(){return this._token||(this._token=this.factory.create(this.store.get(this.key))),this._token}change(){return this.change$.pipe(A())}set(e){return this.save(e),this}clear(){this.save()}valid(){return this.token?.valid()??!1}getBearerToken(){return this.token?.getBearerToken()??""}getRefreshToken(){return this.token?.refreshToken}ngOnDestroy(){this.clearRefresh()}save(e){if(this._token=void 0,!e)this.store.remove(this.key);else{let r=Object.assign({accessToken:"",tokenType:"Bearer"},e,{exp:e.expiresIn?Z()+e.expiresIn:null});this.store.set(this.key,xe(r))}this.change$.next(this.token),this.buildRefresh()}refresh(){return this.buildRefresh(),this.refresh$.pipe(A())}buildRefresh(){this.clearRefresh(),this.token?.needRefresh()&&(this.timer$=Ne(this.token.getRefreshTime()*1e3).subscribe(()=>{this.refresh$.next(this.token)}))}clearRefresh(){this.timer$&&!this.timer$.closed&&this.timer$.unsubscribe()}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var Pe=(()=>{let t=class t{constructor(){this.loginService=c(we),this.tokenService=c(Se),this.user$=new y({}),this.change$=J(this.tokenService.change(),this.tokenService.refresh().pipe(C(()=>this.refresh()))).pipe(C(()=>this.assignUser()),A())}change(){return this.change$}init(){return new Promise(e=>this.change$.subscribe(()=>e()))}check(){return this.tokenService.valid()}login(e,r,o=!1){return this.loginService.login(e,r).pipe(_(s=>{this.tokenService.set(s)}),P(()=>this.check()))}register(e,r){return this.loginService.register({email:e,password:r})}forgotPassword(e){return this.loginService.forgotPassword(e).pipe(v(r=>h(r)))}refresh(){return this.loginService.refresh(xe({refreshToken:this.tokenService.getRefreshToken()})).pipe(v(()=>h(void 0)),_(e=>this.tokenService.set(e)),P(()=>this.check()))}logout(){this.tokenService.clear(),this.check()}user(){return this.user$.pipe(A())}menu(){return Be(()=>this.check(),this.loginService.menu(),h([]))}assignUser(){if(!this.check())return h({}).pipe(_(r=>{this.user$.next(r)}));let e=this.user$.getValue();return Dt(e)?this.loginService.me().pipe(_(r=>{this.user$.next(r)})):h(e)}hasPermission(e){let r=!1;return this.user$.subscribe(o=>{r=o.permissions?.includes(e)||!1}),r}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var $i=(i,t)=>{let a=c(Pe),e=c(H);return a.check()?!0:e.parseUrl("/auth/login")};var Lt=(()=>{let t=class t{constructor(){this.authService=c(Pe),this.menuService=c(pe),this.permissionsService=c(L),this.rolesService=c(W)}load(){return new Promise((e,r)=>{this.authService.change().pipe(_(o=>this.setPermissions(o)),C(()=>this.authService.menu()),_(o=>this.setMenu(o))).subscribe({next:()=>e(),error:()=>e()})})}setMenu(e){this.menuService.addNamespace(e,"menu"),this.menuService.set(e)}setPermissions(e){let r=e.permissions||[],o=e.roles||[];this.permissionsService.loadPermissions(r),this.rolesService.flushRoles();let s=o.reduce((n,l)=>(n[l]=r,n),{});this.rolesService.addRoles(s)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function ur(i){return()=>i.load()}function dr(i){return()=>i.load()}var co=[{provide:Ae,useFactory:ur,deps:[Ct],multi:!0},{provide:Ae,useFactory:dr,deps:[Lt],multi:!0}];var po=(()=>{let t=class t{constructor(){this.document=c(se),this.selector="globalLoader"}getElement(){return this.document.getElementById(this.selector)}hide(){let e=this.getElement();e&&(e.addEventListener("transitionend",()=>{e.className="global-loader-hidden"}),e.classList.contains("global-loader-hidden")||(e.className+=" global-loader-fade-out"))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var $t=new R("BASE_URL"),Bt=(()=>{let t=class t{constructor(){this.baseUrl=c($t,{optional:!0}),this.hasScheme=e=>this.baseUrl&&new RegExp("^http(s)?://","i").test(e)}intercept(e,r){return this.hasScheme(e.url)===!1?r.handle(e.clone({url:this.prependBaseUrl(e.url)})):r.handle(e)}prependBaseUrl(e){return[this.baseUrl?.replace(/\/$/g,""),e.replace(/^\.?\//,"")].filter(r=>r).join("/")}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac});let i=t;return i})();var So=new R("SANCTUM_PREFIX");var Nt=(()=>{let t=class t{intercept(e,r){return r.handle(e)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac});let i=t;return i})();var Vt=(()=>{let t=class t{constructor(){this.settings=c(ge)}intercept(e,r){return r.handle(e.clone({headers:e.headers.append("Accept-Language",this.settings.options.language)}))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac});let i=t;return i})();var qt=(()=>{let t=class t{constructor(){this.router=c(H),this.tokenService=c(Se),this.apiUrl=ce.apiUrl,this.hasHttpScheme=e=>new RegExp("^http(s)?://","i").test(e)}intercept(e,r){let o=()=>{e.url.includes("/auth/logout")&&this.router.navigateByUrl("/auth/login"),this.router.url.includes("/auth/login")&&this.router.navigateByUrl("/dashboard")};if(this.tokenService.valid()&&this.shouldAppendToken(e.url)){let s=this.tokenService.getBearerToken(),n=e.clone({headers:e.headers.set("Authorization",s),withCredentials:!0});return r.handle(n).pipe(v(l=>(l.status===401&&(this.tokenService.clear(),this.router.navigate(["/auth/403"])),B(()=>l))),_(()=>o()))}return r.handle(e).pipe(_(()=>o()))}shouldAppendToken(e){return this.hasHttpScheme(e)?e.startsWith(this.apiUrl):!0}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac});let i=t;return i})();var Ht=(()=>{let t=class t{constructor(){this.toast=c(gt)}intercept(e,r){return e.url.includes("/api/")?r.handle(e).pipe(O(o=>this.handleOkReq(o))):r.handle(e)}handleOkReq(e){if(e instanceof ne){let r=e.body;if(r&&"code"in r&&r.code!==0)return r.msg&&this.toast.error(r.msg),B(()=>[])}return h(e)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac});let i=t;return i})();var Jt=(()=>{let t=class t{constructor(){this.messenger=c(Wt)}intercept(e,r){let o=Date.now(),s;return r.handle(e).pipe(_({next:n=>s=n instanceof ne?"succeeded":"",error:n=>s="failed"}),He(()=>{let n=Date.now()-o,l=`${e.method} "${e.urlWithParams}" ${s} in ${n} ms.`;this.messenger.add(l)}))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac});let i=t;return i})();var rs=[{provide:z,useClass:Nt,multi:!0},{provide:z,useClass:Bt,multi:!0},{provide:z,useClass:Vt,multi:!0},{provide:z,useClass:qt,multi:!0},{provide:z,useClass:Ht,multi:!0},{provide:z,useClass:Jt,multi:!0}];var Rs=(()=>{let t=class t{constructor(){this.ngControl=c(lt,{optional:!0}),this.disableControl=!1}ngOnChanges(){this.disableControl?this.ngControl?.control?.disable():this.ngControl?.control?.enable()}};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=te({type:t,selectors:[["","disableControl",""]],inputs:{disableControl:"disableControl"},standalone:!0,features:[re]});let i=t;return i})();var At=(()=>{let t=class t{constructor(){this.change=new G,this._value="ltr"}get value(){return this._value}set value(e){this._value=e,this.change.next(e)}ngOnDestroy(){this.change.complete()}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var Wt=(()=>{let t=class t{constructor(){this.messages=[]}add(e){this.messages.push(e)}clear(){this.messages=[]}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var _e=(()=>{let t=class t{get(e){return JSON.parse(localStorage.getItem(e)||"{}")||{}}set(e,r){return localStorage.setItem(e,JSON.stringify(r)),!0}has(e){return!!localStorage.getItem(e)}remove(e){localStorage.removeItem(e)}clear(){localStorage.clear()}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function pr(i,t){if(i&1&&(p(0,"mat-error"),g(1),u()),i&2){let a=E();f(),D(a.ValidatorsMessages.required)}}function _r(i,t){if(i&1&&(p(0,"mat-error"),g(1),u()),i&2){let a=E();f(),D(a.ValidatorsMessages.required)}}function gr(i,t){if(i&1&&(p(0,"mat-error"),g(1),u()),i&2){let a=E();f(),K(" ",a.ValidatorsMessages.required," ")}}function vr(i,t){if(i&1&&(p(0,"mat-error"),g(1),u()),i&2){let a=E();f(),K(" ",a.ValidatorsMessages.pattern," ")}}function br(i,t){if(i&1&&(p(0,"mat-error"),g(1),u()),i&2){let a,e=E();f(),K(" \u064A\u062C\u0628 \u0623\u0646 \u062A\u0643\u0648\u0646 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644 ",(a=e.resetForm.get("newPassword"))==null||a.errors==null?null:a.errors.minlength.requiredLength," \u0623\u062D\u0631\u0641. ")}}function yr(i,t){if(i&1&&(p(0,"mat-error"),g(1),u()),i&2){let a,e=E();f(),K(" \u064A\u062C\u0628 \u0623\u0646 \u062A\u0643\u0648\u0646 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0623\u0642\u0644 \u0645\u0646 ",(a=e.resetForm.get("newPassword"))==null||a.errors==null?null:a.errors.maxlength.requiredLength," \u0623\u062D\u0631\u0641. ")}}var Pn=(()=>{let t=class t{constructor(e,r,o,s,n){this.fb=e,this.loginService=r,this.snackBar=o,this.dialogRef=s,this.data=n,this.ValidatorsMessages={required:"\u0647\u0630\u0627 \u0627\u0644\u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628",email:"\u0645\u0646 \u0641\u0636\u0644\u0643 \u0642\u0645 \u0628\u0625\u062F\u062E\u0627\u0644 \u0627\u064A\u0645\u064A\u0644",minlength:"\u064A\u062C\u0628 \u0627\u0646 \u064A\u0643\u0648\u0646 8 \u0627\u062D\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u0627\u0642\u0644",maxlength:"\u064A\u062C\u0628 \u0627\u0646 \u064A\u0643\u0648\u0646 16 \u062D\u0631\u0641 \u0643\u062D\u062F \u0623\u0642\u0635\u0649",pattern:"\u064A\u062C\u0628 \u0623\u0646 \u062A\u062D\u062A\u0648\u064A \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0639\u0644\u0649 \u062D\u0631\u0641 \u0643\u0628\u064A\u0631 \u0648\u0627\u062D\u062F \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644\u060C \u0648\u062D\u0631\u0641 \u0635\u063A\u064A\u0631 \u0648\u0627\u062D\u062F \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644\u060C \u0648\u0631\u0642\u0645 \u0648\u0627\u062D\u062F\u060C \u0648\u062D\u0631\u0641 \u062E\u0627\u0635 \u0648\u0627\u062D\u062F (!@#$%^&*)"},this.resetForm=this.fb.group({email:[this.data.email,[F.required,F.email]],resetCode:["",F.required],newPassword:["",[F.required,F.minLength(8),F.maxLength(16),F.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*]).+$/)]]})}resetPassword(){this.resetForm.valid&&this.loginService.forgotPassword(this.resetForm.value).subscribe({next:()=>{this.snackBar.open("Password reset successful!","Close",{duration:3e3})},error:e=>{this.snackBar.open("Error resetting password: "+e.message,"Close",{duration:3e3})}})}};t.\u0275fac=function(r){return new(r||t)(V(pt),V(we),V(le),V(St),V(Pt))},t.\u0275cmp=ee({type:t,selectors:[["app-reset-password"]],standalone:!0,features:[oe],decls:31,vars:7,consts:[[1,"d-flex","w-full","h-full"],[1,"m-auto",2,"max-width","380px"],[3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","formControlName","email","readonly","",1,"email-input"],[4,"ngIf"],["matInput","","formControlName","resetCode","required",""],["matInput","","type","password","formControlName","newPassword","required",""],[1,"event-button"],["mat-flat-button","","color","primary","type","submit"],["mat-flat-button","","color","danger",3,"click"]],template:function(r,o){if(r&1&&(p(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),g(4,"Reset Password"),u()(),p(5,"mat-card-content")(6,"form",2),Oe("ngSubmit",function(){return o.resetPassword()}),p(7,"mat-form-field",3)(8,"mat-label"),g(9,"Email"),u(),ie(10,"input",4),q(11,pr,2,1,"mat-error",5),u(),p(12,"mat-form-field",3)(13,"mat-label"),g(14,"Reset Code"),u(),ie(15,"input",6),q(16,_r,2,1,"mat-error",5),u(),p(17,"mat-form-field",3)(18,"mat-label"),g(19,"New Password"),u(),ie(20,"input",7),u(),p(21,"div"),q(22,gr,2,1,"mat-error",5)(23,vr,2,1,"mat-error",5)(24,br,2,1,"mat-error",5)(25,yr,2,1,"mat-error",5),u(),p(26,"div",8)(27,"button",9),g(28,"\u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646"),u(),p(29,"button",10),Oe("click",function(){return o.dialogRef.close(!1)}),g(30,"\u0625\u063A\u0644\u0627\u0642"),u()()()()()()),r&2){let s,n,l,b,S,U;f(6),j("formGroup",o.resetForm),f(5),j("ngIf",(s=o.resetForm.get("email"))==null?null:s.invalid),f(5),j("ngIf",(n=o.resetForm.get("resetCode"))==null?null:n.invalid),f(6),j("ngIf",((l=o.resetForm.get("newPassword"))==null?null:l.dirty)&&((l=o.resetForm.get("newPassword"))==null?null:l.hasError("required"))),f(),j("ngIf",((b=o.resetForm.get("newPassword"))==null?null:b.dirty)&&((b=o.resetForm.get("newPassword"))==null?null:b.hasError("pattern"))),f(),j("ngIf",((S=o.resetForm.get("newPassword"))==null?null:S.dirty)&&((S=o.resetForm.get("newPassword"))==null?null:S.hasError("minlength"))),f(),j("ngIf",((U=o.resetForm.get("newPassword"))==null?null:U.dirty)&&((U=o.resetForm.get("newPassword"))==null?null:U.hasError("maxlength")))}},dependencies:[kt,Xe,wt,nt,ot,st,tt,vt,yt,xt,bt,ht,at,ct,mt,ft,ut,dt],styles:["mat-form-field[_ngcontent-%COMP%]{width:95%}mat-form-field[_ngcontent-%COMP%]   .email-input[_ngcontent-%COMP%]{color:#7c7a7a}.event-button[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;max-width:400px;margin:0 auto}.event-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:45%}"]});let i=t;return i})();export{L as a,Cr as b,Rr as c,pe as d,Jr as e,Rs as f,Lr as g,ge as h,we as i,Se as j,Pe as k,$i as l,co as m,po as n,$t as o,rs as p,Pn as q};
