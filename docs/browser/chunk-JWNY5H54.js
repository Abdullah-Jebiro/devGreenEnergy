import{a as Fe}from"./chunk-6ZKTDXSI.js";import{a as at}from"./chunk-7JG4BIKR.js";import{b as se}from"./chunk-AXPFAJA2.js";import{$a as G,Ac as he,Ba as $,Bc as Se,Db as $e,Ea as B,Eb as Z,Fb as J,Gb as K,Gc as I,Ha as P,Hb as Be,Ib as X,Ja as T,La as U,Ma as j,N as we,Rb as Pe,S as oe,Sa as L,Sb as Ue,Ta as Ne,Tb as je,Ub as Le,Va as H,Vb as He,Wb as ze,X as ue,Xb as Ge,Ya as z,Yb as Ye,Za as me,Zb as Qe,_b as We,ac as Ze,cb as Y,dc as ee,fa as N,ha as y,hb as de,hc as ce,ic as Je,jc as te,ka as Oe,kc as pe,lc as Ke,mc as Xe,nc as et,ob as Ve,oc as tt,pc as it,qb as Q,qc as nt,rb as W,rc as rt,xa as V,ya as le,zc as fe}from"./chunk-QYZWJ7ML.js";import{$b as g,Ac as w,Cc as F,Ea as C,Fa as _,Fb as c,Hb as d,Sb as r,Tb as i,Ub as h,Vb as b,Wb as v,Yb as R,bc as _e,ed as O,fd as ae,g as Ae,hc as be,i as ne,ib as l,ic as ve,ja as ye,jb as f,jc as Te,jd as Re,mc as E,nc as a,oa as Ie,oc as D,pa as k,pc as x,ta as M,uc as A,vc as qe}from"./chunk-WSHGJWKC.js";var q=(()=>{let n=class n{constructor(t){this.customService=t,this.url=`${W.apiUrl}/Schedule`}getStationRelations(t,u){let o="?";return t!==void 0&&(o+=`StationSourceId=${t}&`),u&&(o+=`LineType=${u}`),o=o.slice(0,-1),this.customService.getRequests(`${W.apiUrl}/StationRelations/list${o}`)}updateSchedule(t){return this.customService.putRequest(`${this.url}/${t.id}/update`,t)}addSchedule(t){return console.table(t),this.customService.postRequest(this.url,t)}getSchedule(t){return this.customService.getRequests(`${W.apiUrl}/Schedule/${t}`)}getSchedulesWithPagination(t,u,o,m=1,p=50){let S=`?PageNumber=${m}&PageSize=${p}`;return t!==void 0&&t>0&&(S+=`&stationRelationId=${t}`),u&&(S+=`&StartDateTime=${u.toDateString()}`),o&&(S+=`&EndDateTime=${o.toDateString()}`),this.customService.getRequests(`${this.url}${S}`)}deleteSchedule(t){return this.customService.deleteRequest(`${this.url}/${t}`)}};n.\u0275fac=function(u){return new(u||n)(Ie($e))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();var ut=(()=>{let n=class n{constructor(t,u,o,m){this.dialogRef=t,this.scheduleService=u,this.data=o,this.snackBar=m}confirmDelete(){this.scheduleService.deleteSchedule(this.data.id).subscribe({next:()=>{this.dialogRef.close(!0),this.showSnackbarSuccess(`\u0627\u0644\u0639\u0646\u0635\u0631 \u0630\u0648 \u0627\u0644\u0631\u0642\u0645 ${this.data.id} \u0642\u062F \u062A\u0645 \u062D\u0630\u0641\u0647 \u0628\u0646\u062C\u0627\u062D.`)},error:t=>{console.error("Error deleting schedule:",t),this.dialogRef.close(!1),this.showSnackbarError("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0645\u062D\u0627\u0648\u0644\u0629 \u062D\u0630\u0641 \u0627\u0644\u0639\u0646\u0635\u0631.")}})}onNoClick(){this.dialogRef.close(!1)}showSnackbarError(t){this.snackBar.open(t,"\u0625\u063A\u0644\u0627\u0642",{duration:3e3,verticalPosition:"top",horizontalPosition:"center",panelClass:["error-snackbar"]})}showSnackbarSuccess(t){this.snackBar.open(t,"\u0625\u063A\u0644\u0627\u0642",{duration:3e3,verticalPosition:"top",horizontalPosition:"center",panelClass:["success-snackbar"]})}};n.\u0275fac=function(u){return new(u||n)(f(te),f(q),f(pe),f(Q))},n.\u0275cmp=M({type:n,selectors:[["app-delete-schedule"]],standalone:!0,features:[A],decls:13,vars:1,consts:[["mat-dialog-title",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"click"]],template:function(u,o){u&1&&(r(0,"h2",0),a(1,"\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062D\u0630\u0641"),i(),r(2,"mat-dialog-content")(3,"p"),a(4,"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0623\u0646\u0643 \u062A\u0631\u064A\u062F \u062D\u0630\u0641 \u0627\u0644\u0639\u0646\u0635\u0631 \u0630\u0648 \u0627\u0644\u0631\u0642\u0645 "),r(5,"strong"),a(6),i(),a(7,"\u061F"),i()(),r(8,"mat-dialog-actions")(9,"button",1),g("click",function(){return o.onNoClick()}),a(10,"\u0625\u0644\u063A\u0627\u0621"),i(),r(11,"button",2),g("click",function(){return o.confirmDelete()}),a(12,"\u0645\u0648\u0627\u0641\u0642"),i()()),u&2&&(l(6),D(o.data.id))},dependencies:[I,y,Xe,tt,et],styles:[".error-snackbar .mdc-snackbar__surface{background-color:#d6550f!important}  .error-snackbar .mdc-snackbar__label{color:#fff!important}  .success-snackbar .mdc-snackbar__surface{background-color:#4caf50!important}  .success-snackbar .mdc-snackbar__label{color:#fff!important}"]});let e=n;return e})();var re=Ae(Fe());function vt(e,n){if(e&1&&(r(0,"mat-option",17),a(1),i()),e&2){let s=n.$implicit;d("value",s.id),l(),x(" ",s.title," ")}}function Tt(e,n){e&1&&(r(0,"mat-error"),a(1,"\u0645\u0637\u0644\u0648\u0628"),i())}function xt(e,n){e&1&&(r(0,"mat-error"),a(1,"\u0645\u0637\u0644\u0648\u0628"),i())}var ht=(()=>{let n=class n{constructor(t,u,o){this.snackBar=t,this.dialogRef=u,this.scheduleService=o,this.fb=k(G),this.dateAdapter=k(ue),this.translate=k(se),this.timeZone=Number(W.timeZone)||3,this.stationsRelations=[],this.stationRelationId$=0,this.requestAddScheduleForm=this.fb.nonNullable.group({stationRelationId:[0,[T.required]],cuttingReason:["",T.required],requestedCuttingTime:["",T.required],requestedOperatingTime:["",T.required],username:["",T.required],password:["",T.required]}),this.translateSubscription=ne.EMPTY}ngOnInit(){this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)}),this.scheduleService.getStationRelations().subscribe(t=>{this.stationsRelations=t},t=>{console.error("Error fetching station relations",t)})}ngOnDestroy(){this.translateSubscription.unsubscribe()}onStationRelationChange(t){this.stationRelationId$=t.value}convertToDate(t){let u=(0,re.default)(t);u.add(3,"hours");let o=u.format("YYYY-MM-DD HH:mm:ss");return u.toDate()}validateRequestedCuttingTime(t){if(t){let u=new Date;if((0,re.default)(t).isBefore(u))return this.setFormControlError("requestedCuttingTime","invalidDate","\u0627\u0644\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0645\u0637\u0644\u0648\u0628 \u0644\u0644\u0642\u0637\u0639 \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0641\u064A \u0627\u0644\u0645\u0633\u062A\u0642\u0628\u0644"),!1;this.clearFormControlError("requestedCuttingTime")}return!0}validateRequestedOperatingTime(t,u){if(t&&u){let o=(0,re.default)(t);if((0,re.default)(u).isBefore(o))return this.setFormControlError("requestedOperatingTime","invalidOperatingTime","\u0648\u0642\u062A \u0627\u0644\u062A\u0634\u063A\u064A\u0644 \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0628\u0639\u062F \u0648\u0642\u062A \u0627\u0644\u0642\u0637\u0639"),!1;this.clearFormControlError("requestedOperatingTime")}return!0}onSubmit(){if(this.requestAddScheduleForm.valid){console.log(this.requestAddScheduleForm.get("requestedCuttingTime")?.value);let t=this.convertToDate(this.requestAddScheduleForm.get("requestedCuttingTime")?.value),u=this.convertToDate(this.requestAddScheduleForm.get("requestedOperatingTime")?.value);console.log(t);let o=this.validateRequestedCuttingTime(t),m=this.validateRequestedOperatingTime(t,u);console.log(t),o&&m&&this.scheduleService.addSchedule(this.createScheduleCommand).subscribe(p=>{this.dialogRef.close({clicked:"submit",form:this.createScheduleCommand}),this.showSnackbarSuccess("Schedule added successfully")},p=>{console.error("Error adding schedule:",p),this.showSnackbarError("Error adding schedule")})}else this.showSnackbarError("\u064A\u0631\u062C\u0649 \u062A\u0639\u0628\u0626\u0629 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 \u0628\u0634\u0643\u0644 \u0635\u062D\u064A\u062D.")}setFormControlError(t,u,o){this.requestAddScheduleForm.get(t)?.setErrors({[u]:!0}),this.showSnackbarError(o)}clearFormControlError(t){this.requestAddScheduleForm.get(t)?.setErrors(null)}showSnackbarError(t){this.snackBar.open(t,"Close",{duration:3e3,verticalPosition:"top",horizontalPosition:"center",panelClass:["error-snackbar"]})}showSnackbarSuccess(t){this.snackBar.open(t,"Close",{duration:3e3,verticalPosition:"top",horizontalPosition:"center",panelClass:["success-snackbar"]})}};n.\u0275fac=function(u){return new(u||n)(f(Q),f(te),f(q))},n.\u0275cmp=M({type:n,selectors:[["app-add-schedule"]],standalone:!0,features:[A],decls:39,vars:12,consts:[["requestedCuttingTime",""],["requestedOperatingTime",""],["dir","rtl",1,"col-12"],[2,"color","white"],[1,"form-field-full",3,"ngSubmit","formGroup"],["required","","formControlName","stationRelationId",3,"selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","cuttingReason","matInput","","placeholder","\u0627\u0643\u062A\u0628 \u0645\u0644\u0627\u062D\u0638\u062A\u0643 \u0647\u0646\u0627"],["formControlName","requestedCuttingTime","matInput","","required","",3,"mtxDatetimepicker"],["matSuffix","",3,"for"],["mode","portrait",3,"timeInterval","touchUi"],[4,"ngIf"],["formControlName","requestedOperatingTime","matInput","","required","",3,"mtxDatetimepicker"],[1,"m-t-8","d-flex","justify-content-first"],["mat-flat-button","","type","submit"],["mat-button","","type","button",1,"m-x-8",3,"click"],[3,"value"]],template:function(u,o){if(u&1){let m=R();r(0,"div",2)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title",3),a(4,"\u0637\u0644\u0628 \u062D\u062C\u0632 \u062E\u0637"),i()(),r(5,"mat-card-content")(6,"form",4),g("ngSubmit",function(){return C(m),_(o.onSubmit())}),r(7,"mat-form-field")(8,"mat-label"),a(9,"\u0627\u0633\u0645 \u0627\u0644\u062E\u0637"),i(),r(10,"mat-select",5),g("selectionChange",function(S){return C(m),_(o.onStationRelationChange(S))}),r(11,"mat-option",6),a(12,"-- None --"),i(),c(13,vt,2,2,"mat-option",7),i()(),r(14,"mat-form-field")(15,"mat-label"),a(16,"\u0627\u0644\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),i(),h(17,"textarea",8),i(),r(18,"mat-form-field")(19,"mat-label"),a(20,"\u062A\u0627\u0631\u064A\u062E \u0628\u062F\u0627\u064A\u0629 \u0627\u0644\u0642\u0637\u0639"),i(),h(21,"input",9)(22,"mtx-datetimepicker-toggle",10)(23,"mtx-datetimepicker",11,0),c(25,Tt,2,0,"mat-error",12),i(),r(26,"mat-form-field")(27,"mat-label"),a(28,"\u062A\u0627\u0631\u064A\u062E \u0646\u0647\u0627\u064A\u0629 \u0627\u0644\u0642\u0637\u0639"),i(),h(29,"input",13)(30,"mtx-datetimepicker-toggle",10)(31,"mtx-datetimepicker",11,1),c(33,xt,2,0,"mat-error",12),i(),r(34,"div",14)(35,"button",15),a(36,"\u0625\u0631\u0633\u0627\u0644"),i(),r(37,"button",16),g("click",function(){return C(m),_(o.dialogRef.close(!1))}),a(38,"\u0625\u0644\u063A\u0627\u0621"),i()()()()()()}if(u&2){let m,p,S=E(24),ie=E(32);l(6),d("formGroup",o.requestAddScheduleForm),l(7),d("ngForOf",o.stationsRelations),l(8),d("mtxDatetimepicker",S),l(),d("for",S),l(),d("timeInterval",5)("touchUi",!0),l(2),d("ngIf",(m=o.requestAddScheduleForm.get("requestedCuttingTime"))==null||m.errors==null?null:m.errors.required),l(4),d("mtxDatetimepicker",ie),l(),d("for",ie),l(),d("timeInterval",5)("touchUi",!0),l(2),d("ngIf",(p=o.requestAddScheduleForm.get("requestedOperatingTime"))==null||p.errors==null?null:p.errors.required)}},dependencies:[I,O,ae,ee,B,V,le,$,oe,y,Z,K,X,J,L,P,U,j,me,H,z,Y,N,fe,Se,he],styles:[".error-snackbar .mdc-snackbar__surface{background-color:#d6550f!important}  .error-snackbar .mdc-snackbar__label{color:#fff!important}  .success-snackbar .mdc-snackbar__surface{background-color:#4caf50!important}  .success-snackbar .mdc-snackbar__label{color:#fff!important}"]});let e=n;return e})();var St=Ae(Fe());function Et(e,n){if(e&1&&(r(0,"mat-option",24),a(1),i()),e&2){let s=n.$implicit;d("value",s.id),l(),x(" ",s.title," ")}}function Dt(e,n){e&1&&(r(0,"mat-error"),a(1,"\u0645\u0637\u0644\u0648\u0628"),i())}function kt(e,n){e&1&&(r(0,"mat-error"),a(1,"\u0645\u0637\u0644\u0648\u0628"),i())}function Mt(e,n){if(e&1&&(r(0,"mat-option",24),a(1),i()),e&2){let s=n.$implicit;d("value",s.id),l(),x(" ",s.title," ")}}function At(e,n){e&1&&(r(0,"mat-error"),a(1," \u0645\u0637\u0644\u0648\u0628 "),i())}var gt=(()=>{let n=class n{constructor(t,u,o,m){this.snackBar=t,this.dialogRef=u,this.scheduleService=o,this.data=m,this.fb=k(G),this.dateAdapter=k(ue),this.translate=k(se),this.stationsRelations=[],this.userNames=[],this.stationRelationId$=0,this.translateSubscription=ne.EMPTY,this.scheduleIdSubscription=ne.EMPTY,this.requestUpdateScheduleForm=this.fb.nonNullable.group({id:[m.schedule.id,T.required],stationRelationId:[m.schedule.stationRelationId,[T.required]],cuttingReason:[m.schedule.cuttingReason,T.required],powerBeforeCutting:[m.schedule.powerBeforeCutting],volt:[m.schedule.volt],scheduledCuttingTime:[m.schedule.scheduledCuttingTime],operatingTime:[m.schedule.operatingTime],requestedCuttingTime:[m.schedule.requestedCuttingTime,T.required],requestedOperatingTime:[m.schedule.requestedOperatingTime,T.required]})}ngOnInit(){this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)}),this.scheduleService.getStationRelations().subscribe(t=>{this.stationsRelations=t},t=>{console.error("\u062E\u0637\u0623 \u0641\u064A \u062C\u0644\u0628 \u0639\u0644\u0627\u0642\u0627\u062A \u0627\u0644\u0645\u062D\u0637\u0629",t)})}ngOnDestroy(){this.translateSubscription.unsubscribe(),this.scheduleIdSubscription.unsubscribe()}onStationRelationChange(t){this.stationRelationId$=t.value}onSubmit(){if(this.requestUpdateScheduleForm.valid){this.updateScheduleCommand=this.requestUpdateScheduleForm.value,this.updateScheduleCommand.requestedCuttingTime=this.convertToDate(this.updateScheduleCommand.requestedCuttingTime),this.updateScheduleCommand.requestedOperatingTime=this.convertToDate(this.updateScheduleCommand.requestedOperatingTime);let t={id:this.updateScheduleCommand.id,stationRelationId:this.updateScheduleCommand.stationRelationId,cuttingReason:this.updateScheduleCommand.cuttingReason,powerBeforeCutting:this.updateScheduleCommand.powerBeforeCutting,assignedUserId:this.updateScheduleCommand.assignedUserId,volt:this.updateScheduleCommand.volt,scheduledCuttingTime:this.updateScheduleCommand.scheduledCuttingTime,operatingTime:this.updateScheduleCommand.operatingTime,requestedCuttingTime:this.updateScheduleCommand.requestedCuttingTime,requestedOperatingTime:this.updateScheduleCommand.requestedOperatingTime};this.scheduleService.updateSchedule(t).subscribe(u=>{this.dialogRef.close({clicked:"submit",form:this.updateScheduleCommand}),this.showSnackbarSuccess("\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062C\u062F\u0648\u0644 \u0627\u0644\u0632\u0645\u0646\u064A \u0628\u0646\u062C\u0627\u062D")},u=>{console.error("\u062E\u0637\u0623 \u0641\u064A \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062C\u062F\u0648\u0644 \u0627\u0644\u0632\u0645\u0646\u064A:",u),this.showSnackbarError("\u062E\u0637\u0623 \u0641\u064A \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062C\u062F\u0648\u0644 \u0627\u0644\u0632\u0645\u0646\u064A")})}else this.showSnackbarError("\u064A\u0631\u062C\u0649 \u0645\u0644\u0621 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629")}convertToDate(t){return(0,St.default)(t).toDate()}showSnackbarError(t){this.snackBar.open(t,"\u0625\u063A\u0644\u0627\u0642",{duration:3e3,verticalPosition:"top",horizontalPosition:"center",panelClass:["error-snackbar"]})}showSnackbarSuccess(t){this.snackBar.open(t,"\u0625\u063A\u0644\u0627\u0642",{duration:3e3,verticalPosition:"top",horizontalPosition:"center",panelClass:["success-snackbar"]})}};n.\u0275fac=function(u){return new(u||n)(f(Q),f(te),f(q),f(pe))},n.\u0275cmp=M({type:n,selectors:[["app-update-schedule"]],standalone:!0,features:[A],decls:73,vars:22,consts:[["requestedCuttingTime",""],["requestedOperatingTime",""],["scheduledCuttingTime",""],["operatingTime",""],["dir","rtl",1,"col-12"],[2,"color","white"],[1,"form-field-full",3,"ngSubmit","formGroup"],["required","","formControlName","stationRelationId",3,"selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","cuttingReason","matInput","","placeholder","\u0627\u0643\u062A\u0628 \u0645\u0644\u0627\u062D\u0638\u062A\u0643 \u0647\u0646\u0627"],["formControlName","requestedCuttingTime","matInput","","required","",3,"mtxDatetimepicker"],["matSuffix","",3,"for"],["mode","portrait",3,"timeInterval","touchUi"],[4,"ngIf"],["formControlName","requestedOperatingTime","matInput","","required","",3,"mtxDatetimepicker"],["formControlName","stationRelationName","matInput","","placeholder","\u0627\u0633\u0645 \u0627\u0644\u0645\u062D\u0637\u0629"],["formControlName","powerBeforeCutting","matInput","","type","number","placeholder","\u0642\u0648\u0629 \u0642\u0628\u0644 \u0627\u0644\u0642\u0637\u0639"],["formControlName","volt","matInput","","type","number","placeholder","\u0627\u0644\u0641\u0648\u0644\u062A"],["formControlName","scheduledCuttingTime","matInput","",3,"mtxDatetimepicker"],["formControlName","operatingTime","matInput","",3,"mtxDatetimepicker"],[1,"m-t-8","d-flex","justify-content-first"],["mat-flat-button","","type","submit"],["mat-button","","type","button",1,"m-x-8",3,"click"],[3,"value"]],template:function(u,o){if(u&1){let m=R();r(0,"div",4)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title",5),a(4,"\u062A\u062D\u062F\u064A\u062B \u062D\u062C\u0632 \u062E\u0637"),i()(),r(5,"mat-card-content")(6,"form",6),g("ngSubmit",function(){return C(m),_(o.onSubmit())}),r(7,"mat-form-field")(8,"mat-label"),a(9,"\u0627\u0633\u0645 \u0627\u0644\u062E\u0637"),i(),r(10,"mat-select",7),g("selectionChange",function(S){return C(m),_(o.onStationRelationChange(S))}),r(11,"mat-option",8),a(12,"-- None --"),i(),c(13,Et,2,2,"mat-option",9),i()(),r(14,"mat-form-field")(15,"mat-label"),a(16,"\u0627\u0644\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),i(),h(17,"textarea",10),i(),r(18,"mat-form-field")(19,"mat-label"),a(20,"\u062A\u0627\u0631\u064A\u062E \u0628\u062F\u0627\u064A\u0629 \u0627\u0644\u0642\u0637\u0639"),i(),h(21,"input",11)(22,"mtx-datetimepicker-toggle",12)(23,"mtx-datetimepicker",13,0),c(25,Dt,2,0,"mat-error",14),i(),r(26,"mat-form-field")(27,"mat-label"),a(28,"\u062A\u0627\u0631\u064A\u062E \u0646\u0647\u0627\u064A\u0629 \u0627\u0644\u0642\u0637\u0639"),i(),h(29,"input",15)(30,"mtx-datetimepicker-toggle",12)(31,"mtx-datetimepicker",13,1),c(33,kt,2,0,"mat-error",14),i(),r(34,"mat-form-field")(35,"mat-label"),a(36,"\u0627\u0633\u0645 \u0627\u0644\u062E\u0637"),i(),r(37,"mat-select",7),g("selectionChange",function(S){return C(m),_(o.onStationRelationChange(S))}),r(38,"mat-option",8),a(39,"-- None --"),i(),c(40,Mt,2,2,"mat-option",9),i()(),r(41,"mat-form-field")(42,"mat-label"),a(43,"\u0627\u0633\u0645 \u0627\u0644\u0645\u062D\u0637\u0629"),i(),h(44,"input",16),c(45,At,2,0,"mat-error",14),i(),r(46,"mat-form-field")(47,"mat-label"),a(48,"\u0642\u0648\u0629 \u0642\u0628\u0644 \u0627\u0644\u0642\u0637\u0639"),i(),h(49,"input",17),i(),r(50,"mat-form-field")(51,"mat-label"),a(52,"\u0627\u0644\u0641\u0648\u0644\u062A"),i(),h(53,"input",18),i(),r(54,"mat-form-field")(55,"mat-label"),a(56,"\u0648\u0642\u062A \u0627\u0644\u0641\u0635\u0644 \u0627\u0644\u0641\u0639\u0644\u064A"),i(),h(57,"input",19)(58,"mtx-datetimepicker-toggle",12)(59,"mtx-datetimepicker",13,2),i(),r(61,"mat-form-field")(62,"mat-label"),a(63,"\u0648\u0642\u062A \u0627\u0644\u0625\u0639\u0627\u062F\u0629 \u0627\u0644\u0641\u0639\u0644\u064A"),i(),h(64,"input",20)(65,"mtx-datetimepicker-toggle",12)(66,"mtx-datetimepicker",13,3),i(),r(68,"div",21)(69,"button",22),a(70,"\u062A\u062D\u062F\u064A\u062B"),i(),r(71,"button",23),g("click",function(){return C(m),_(o.dialogRef.close(!1))}),a(72,"\u0625\u0644\u063A\u0627\u0621"),i()()()()()()}if(u&2){let m,p,S,ie=E(24),De=E(32),ke=E(60),Me=E(67);l(6),d("formGroup",o.requestUpdateScheduleForm),l(7),d("ngForOf",o.stationsRelations),l(8),d("mtxDatetimepicker",ie),l(),d("for",ie),l(),d("timeInterval",5)("touchUi",!0),l(2),d("ngIf",(m=o.requestUpdateScheduleForm.get("requestedCuttingTime"))==null||m.errors==null?null:m.errors.required),l(4),d("mtxDatetimepicker",De),l(),d("for",De),l(),d("timeInterval",5)("touchUi",!0),l(2),d("ngIf",(p=o.requestUpdateScheduleForm.get("requestedOperatingTime"))==null||p.errors==null?null:p.errors.required),l(7),d("ngForOf",o.stationsRelations),l(5),d("ngIf",(S=o.requestUpdateScheduleForm.get("stationRelationName"))==null?null:S.hasError("required")),l(12),d("mtxDatetimepicker",ke),l(),d("for",ke),l(),d("timeInterval",5)("touchUi",!0),l(5),d("mtxDatetimepicker",Me),l(),d("for",Me),l(),d("timeInterval",5)("touchUi",!0)}},dependencies:[I,O,ae,ee,B,V,le,$,oe,y,Z,K,X,J,L,P,Ne,U,j,me,H,z,Y,N,fe,Se,he],styles:[".error-snackbar .mdc-snackbar__surface{background-color:#d6550f!important}  .error-snackbar .mdc-snackbar__label{color:#fff!important}  .success-snackbar .mdc-snackbar__surface{background-color:#4caf50!important}  .success-snackbar .mdc-snackbar__label{color:#fff!important}"]});let e=n;return e})();var yt=()=>[10,20,50,100];function It(e,n){if(e&1&&(r(0,"mat-option",40),a(1),i()),e&2){let s=n.$implicit;d("value",s.id),l(),x(" ",s.title," ")}}function qt(e,n){e&1&&(r(0,"th",41),a(1,"\u0645\u0646"),i())}function Rt(e,n){if(e&1&&(r(0,"td",42),a(1),i()),e&2){let s=n.$implicit;l(),D(s.station)}}function wt(e,n){e&1&&(r(0,"th",41),a(1," \u0625\u0644\u0649"),i())}function Ft(e,n){if(e&1&&(r(0,"td",42),a(1),i()),e&2){let s=n.$implicit;l(),D(s.stationRelationName)}}function Ot(e,n){e&1&&(r(0,"th",41),a(1,"\u0633\u0628\u0628 \u0627\u0644\u0642\u0637\u0639"),i())}function Nt(e,n){if(e&1&&(r(0,"td",42),a(1),i()),e&2){let s=n.$implicit;l(),D(s.cuttingReason)}}function Vt(e,n){e&1&&(r(0,"th",41),a(1,"\u0627\u0644\u0637\u0627\u0642\u0629 \u0642\u0628\u0644 \u0627\u0644\u0642\u0637\u0639"),i())}function $t(e,n){if(e&1&&(r(0,"td",42),a(1),i()),e&2){let s=n.$implicit;l(),D(s.powerBeforeCutting)}}function Bt(e,n){e&1&&(r(0,"th",41),a(1,"\u0627\u0644\u0641\u0648\u0644\u062A"),i())}function Pt(e,n){if(e&1&&(r(0,"td",42),a(1),i()),e&2){let s=n.$implicit;l(),D(s.volt)}}function Ut(e,n){e&1&&(r(0,"th",41),a(1,"\u062A\u0645 \u0627\u0644\u0627\u0637\u0644\u0627\u0639 \u0639\u0644\u064A\u0647"),i())}function jt(e,n){if(e&1&&(r(0,"td",42),a(1),i()),e&2){let s=n.$implicit;l(),D(s.isViewed?"\u0646\u0639\u0645":"\u0644\u0627")}}function Lt(e,n){e&1&&(r(0,"th",41),a(1,"\u0648\u0642\u062A \u0627\u0644\u0642\u0637\u0639 \u0627\u0644\u0645\u062C\u062F\u0648\u0644"),i())}function Ht(e,n){if(e&1&&(r(0,"td",42),a(1),w(2,"date"),i()),e&2){let s=n.$implicit;l(),x(" ",F(2,1,s.scheduledCuttingTime,"yy-M-d H:mm")," ")}}function zt(e,n){e&1&&(r(0,"th",41),a(1,"\u0648\u0642\u062A \u0627\u0644\u062A\u0634\u063A\u064A\u0644"),i())}function Gt(e,n){if(e&1&&(r(0,"td",42),a(1),w(2,"date"),i()),e&2){let s=n.$implicit;l(),x(" ",F(2,1,s.operatingTime,"yy-M-d H:mm")," ")}}function Yt(e,n){e&1&&(r(0,"th",41),a(1,"\u0648\u0642\u062A \u0627\u0644\u0642\u0637\u0639 \u0627\u0644\u0645\u0637\u0644\u0648\u0628"),i())}function Qt(e,n){if(e&1&&(r(0,"td",42),a(1),w(2,"date"),i()),e&2){let s=n.$implicit;l(),x(" ",F(2,1,s.requestedCuttingTime,"yy-M-d H:mm")," ")}}function Wt(e,n){e&1&&(r(0,"th",41),a(1,"\u0648\u0642\u062A \u0627\u0644\u062A\u0634\u063A\u064A\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628"),i())}function Zt(e,n){if(e&1&&(r(0,"td",42),a(1),w(2,"date"),i()),e&2){let s=n.$implicit;l(),x(" ",F(2,1,s.requestedOperatingTime,"yy-M-d H:mm")," ")}}function Jt(e,n){e&1&&(r(0,"th",41),a(1,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0625\u0646\u0634\u0627\u0621"),i())}function Kt(e,n){if(e&1&&(r(0,"td",42),a(1),w(2,"date"),i()),e&2){let s=n.$implicit;l(),D(F(2,1,s.created,"yy-M-d H:mm"))}}function Xt(e,n){e&1&&(r(0,"th",41),a(1,"\u062A\u0645 \u0627\u0644\u0625\u0646\u0634\u0627\u0621 \u0628\u0648\u0627\u0633\u0637\u0629"),i())}function ei(e,n){if(e&1&&(r(0,"td",42),a(1),i()),e&2){let s=n.$implicit;l(),D(s.creatorName)}}function ti(e,n){e&1&&(r(0,"th",41),a(1,"\u062A\u0627\u0631\u064A\u062E \u0622\u062E\u0631 \u062A\u0639\u062F\u064A\u0644"),i())}function ii(e,n){if(e&1&&(r(0,"td",42),a(1),w(2,"date"),i()),e&2){let s=n.$implicit;l(),x(" ",F(2,1,s.lastModified,"yy-M-d H:mm")," ")}}function ni(e,n){e&1&&(r(0,"th",43),a(1,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),i())}function ri(e,n){if(e&1){let s=R();r(0,"td",42)(1,"button",44),g("click",function(){let u=C(s).$implicit,o=_e();return _(o.deleteSchedule(u.id))}),r(2,"mat-icon"),a(3,"delete"),i()(),r(4,"button",45),g("click",function(){let u=C(s).$implicit,o=_e();return _(o.openUpdateScheduleDialog(u))}),r(5,"mat-icon"),a(6,"edit"),i()()()}}function ai(e,n){e&1&&h(0,"tr",46)}function oi(e,n){e&1&&h(0,"tr",47)}var Ct=(()=>{let n=class n{constructor(t,u,o,m){this.scheduleService=t,this.fb=u,this.liveAnnouncer=o,this.dialog=m,this.displayedColumns=["station","stationRelationName","cuttingReason","powerBeforeCutting","volt","isViewed","scheduledCuttingTime","operatingTime","requestedCuttingTime","requestedOperatingTime","created","creatorName","lastModified","actions"],this.dataSource=new Ze([]),this.stationsRelations=[],this.totalRecords=0,this.pageSize=50,this.pageNumber=1,this.isLoading=!1,this.filterForm=this.fb.group({stationRelationId:[""],startDateTime:[""],endDateTime:[""]})}ngOnInit(){this.isLoading=!0,this.loadSchedules(),this.loadStationRelations()}loadSchedules(t,u,o){this.scheduleService.getSchedulesWithPagination(t,u,o,this.pageNumber,this.pageSize).subscribe(m=>{this.dataSource.data=m.items.flat(),this.totalRecords=m.totalCount,this.isLoading=!1},m=>{console.error("Error fetching schedules",m),this.isLoading=!1})}loadStationRelations(){this.scheduleService.getStationRelations().subscribe(t=>{this.stationsRelations=t,this.isLoading=!1},t=>{console.error("Error fetching station relations",t),this.isLoading=!1})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}onFilterChange(){this.pageNumber=1;let{stationRelationId:t,startDateTime:u,endDateTime:o}=this.filterForm.value;this.loadSchedules(t,u,o)}onPageChange(t){this.pageNumber=t.pageIndex+1,this.pageSize=t.pageSize,this.loadSchedules(this.filterForm.value.stationRelationId,this.filterForm.value.startDateTime,this.filterForm.value.endDateTime)}openAddScheduleDialog(){this.dialog.open(ht,{width:"350px",height:"550px",disableClose:!0}).afterClosed().subscribe(u=>{u?.clicked==="submit"&&this.loadSchedules()})}openUpdateScheduleDialog(t){console.log(t),this.dialog.open(gt,{width:"350px",height:"800px",disableClose:!0,data:{schedule:t}}).afterClosed().subscribe(o=>{o&&this.loadSchedules()})}announceSortChange(t){t.direction?this.liveAnnouncer.announce(`Sorted ${t.direction}ending`):this.liveAnnouncer.announce("Sorting cleared")}deleteSchedule(t){this.dialog.open(ut,{data:{id:t}}).afterClosed().subscribe(o=>{o&&(this.dataSource.data=this.dataSource.data.filter(m=>m.id!==t),console.log(`The item with ID ${t} has been deleted.`))})}};n.\u0275fac=function(u){return new(u||n)(f(q),f(G),f(we),f(Ke))},n.\u0275cmp=M({type:n,selectors:[["app-schedule-table"]],viewQuery:function(u,o){if(u&1&&(be(ce,5),be(de,5)),u&2){let m;ve(m=Te())&&(o.sort=m.first),ve(m=Te())&&(o.paginator=m.first)}},standalone:!0,features:[A],decls:86,vars:14,consts:[["startDatePicker",""],["endDatePicker",""],[1,"header-content"],[1,"details-table"],[2,"margin-bottom","10px"],[1,"icon-btn"],["aria-hidden","true","aria-label","\u0625\u0636\u0627\u0641\u0629 \u062C\u062F\u0648\u0644",1,"add-icon",3,"click"],[2,"display","flex","justify-content","center","align-items","center","flex-direction","column"],[2,"display","flex","align-items","center","gap","16px",3,"ngSubmit","formGroup"],["appearance","fill",2,"width","100%"],["formControlName","stationRelationId"],["value",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","startDateTime",3,"matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","endDateTime",3,"matDatepicker"],["mat-raised-button","","color","primary","type","submit"],[1,"table-wrapper","table-1"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","station"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","stationRelationName"],["matColumnDef","cuttingReason"],["matColumnDef","powerBeforeCutting"],["matColumnDef","volt"],["matColumnDef","isViewed"],["matColumnDef","scheduledCuttingTime"],["matColumnDef","operatingTime"],["matColumnDef","requestedCuttingTime"],["matColumnDef","requestedOperatingTime"],["matColumnDef","created"],["matColumnDef","creatorName"],["matColumnDef","lastModified"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"page","length","pageSize","pageSizeOptions"],[3,"isLoading"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-icon-button","",1,"delete-icon",3,"click"],["mat-icon-button","",1,"update-icon",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(u,o){if(u&1){let m=R();r(0,"mat-card")(1,"mat-card-header")(2,"div",2)(3,"div",3)(4,"mat-card-title"),a(5,"\u0627\u0644\u062D\u062C\u0648\u0632\u0627\u062A"),i(),r(6,"mat-card-subtitle",4),a(7,"\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u062D\u062C\u0632"),i()(),r(8,"div",5)(9,"mat-icon",6),g("click",function(){return C(m),_(o.openAddScheduleDialog())}),a(10,"add"),i()()()(),r(11,"mat-card-content")(12,"div",7)(13,"form",8),g("ngSubmit",function(){return C(m),_(o.onFilterChange())}),r(14,"mat-form-field",9)(15,"mat-label"),a(16,"\u0627\u0633\u0645 \u0627\u0644\u062E\u0637"),i(),r(17,"mat-select",10)(18,"mat-option",11),a(19,"-- \u0644\u0627 \u0634\u064A\u0621 --"),i(),c(20,It,2,2,"mat-option",12),i()(),r(21,"mat-form-field",9)(22,"mat-label"),a(23,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0628\u062F\u0621"),i(),h(24,"input",13)(25,"mat-datepicker-toggle",14)(26,"mat-datepicker",null,0),i(),r(28,"mat-form-field",9)(29,"mat-label"),a(30,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0627\u0646\u062A\u0647\u0627\u0621"),i(),h(31,"input",15)(32,"mat-datepicker-toggle",14)(33,"mat-datepicker",null,1),i(),r(35,"button",16),a(36,"\u062A\u0635\u0641\u064A\u0629"),i()()(),r(37,"div",17)(38,"div",17)(39,"table",18),b(40,19),c(41,qt,2,0,"th",20)(42,Rt,2,1,"td",21),v(),b(43,22),c(44,wt,2,0,"th",20)(45,Ft,2,1,"td",21),v(),b(46,23),c(47,Ot,2,0,"th",20)(48,Nt,2,1,"td",21),v(),b(49,24),c(50,Vt,2,0,"th",20)(51,$t,2,1,"td",21),v(),b(52,25),c(53,Bt,2,0,"th",20)(54,Pt,2,1,"td",21),v(),b(55,26),c(56,Ut,2,0,"th",20)(57,jt,2,1,"td",21),v(),b(58,27),c(59,Lt,2,0,"th",20)(60,Ht,3,4,"td",21),v(),b(61,28),c(62,zt,2,0,"th",20)(63,Gt,3,4,"td",21),v(),b(64,29),c(65,Yt,2,0,"th",20)(66,Qt,3,4,"td",21),v(),b(67,30),c(68,Wt,2,0,"th",20)(69,Zt,3,4,"td",21),v(),b(70,31),c(71,Jt,2,0,"th",20)(72,Kt,3,4,"td",21),v(),b(73,32),c(74,Xt,2,0,"th",20)(75,ei,2,1,"td",21),v(),b(76,33),c(77,ti,2,0,"th",20)(78,ii,3,4,"td",21),v(),b(79,34),c(80,ni,2,0,"th",35)(81,ri,7,0,"td",21),v(),c(82,ai,1,0,"tr",36)(83,oi,1,0,"tr",37),i()()(),r(84,"mat-paginator",38),g("page",function(S){return C(m),_(o.onPageChange(S))}),i()(),h(85,"app-loading-spinner",39),i()}if(u&2){let m=E(27),p=E(34);l(13),d("formGroup",o.filterForm),l(7),d("ngForOf",o.stationsRelations),l(4),d("matDatepicker",m),l(),d("for",m),l(6),d("matDatepicker",p),l(),d("for",p),l(7),d("dataSource",o.dataSource),l(43),d("matHeaderRowDef",o.displayedColumns),l(),d("matRowDefColumns",o.displayedColumns),l(),d("length",o.totalRecords)("pageSize",o.pageSize)("pageSizeOptions",qe(13,yt)),l(),d("isLoading",o.isLoading)}},dependencies:[I,O,ee,B,V,$,Pe,je,Ge,Le,Ue,Ye,He,ze,Qe,We,ce,Je,y,Oe,Z,K,X,Be,J,Ve,L,P,U,j,H,z,it,nt,rt,Y,N,de,Re,at],styles:["table[_ngcontent-%COMP%]{width:100%}th.mat-sort-header-sorted[_ngcontent-%COMP%]{color:#000}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.coulmnName[_ngcontent-%COMP%]{text-align:center}.td-data[_ngcontent-%COMP%]{color:#fefefe;font-size:15px;text-align:right}.icon-btn[_ngcontent-%COMP%]{display:inline-flex;width:50px;height:50px;background-color:#1a5878;border-radius:50%;align-items:center;justify-content:center}.icon-btn[_ngcontent-%COMP%]   .add-icon[_ngcontent-%COMP%]{cursor:pointer;font-size:30px;color:#fff;margin-right:5px;margin-bottom:3px}  .delete-icon .mat-icon{color:red}.mat-sort-header-content[_ngcontent-%COMP%]{width:60px!important}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;width:100%}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{min-width:100%}"]});let e=n;return e})();var on=[{path:"",component:Ct}];export{on as routes};
